<template>
    <section class="hero" ref="heroRef">
        <div class="hero-inner">
            <!-- LEFT: TEXT -->
            <div class="hero-left">
                <h1 class="hero-title">
                    <span>‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô</span> ‡∫Ç‡ªâ‡∫≤‡∫°‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô‡∫ú‡ªà‡∫≤‡∫ô‡∫ï‡∫π‡ªâ ATM

                </h1>

                <p class="hero-subtitle">
                    ‡∫Å‡∫≤‡∫ô‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ç‡ªâ‡∫≤‡∫°‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô‡∫ú‡ªà‡∫≤‡∫ô‡∫ï‡∫π‡ªâ ATM ‡ªÅ‡∫°‡ªà‡∫ô‡∫ô‡∫≥‡ªÉ‡∫ä‡ªâ‡∫•‡∫∞‡∫ö‡∫ª‡∫ö‡ªÅ‡∫•‡∫±‡∫ö
                    ‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡ªÄ‡∫ä‡∫∑‡ªà‡∫≠‡∫°‡ªÇ‡∫ç‡∫á‡∫ï‡∫π‡ªâ‡ªÄ‡∫≠‡∫ó‡∫µ‡ªÄ‡∫≠‡∫±‡∫°‡∫Ç‡∫≠‡∫á‡ªÅ‡∫ï‡ªà‡∫•‡∫∞‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô‡∫ó‡∫µ‡ªà‡ªÄ‡∫õ‡∫±‡∫ô‡∫™‡∫∞‡∫°‡∫≤‡∫ä‡∫¥‡∫Å‡∫Ç‡∫≠‡∫á
                    ‡∫ö‡ªç‡∫•‡∫¥‡∫™‡∫±‡∫î‡∫•‡∫≤‡∫ß ‡ªÄ‡∫ô‡ªÄ‡∫ä‡∫µ‡∫ô‡∫ô‡ªç‡ªÄ‡∫û‡ªÄ‡∫°‡∫±‡ªâ‡∫ô ‡ªÄ‡∫ô‡∫±‡∫î‡ªÄ‡∫ß‡∫µ‡∫Å ‡ªÉ‡∫´‡ªâ‡∫™‡∫≤‡∫°‡∫≤‡∫î‡ªÉ‡∫ä‡ªâ‡∫ü‡∫±‡∫á‡∫ä‡∫±‡ªà‡∫ô‡∫Å‡∫≤‡∫ô‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô
                    ‡∫Ç‡ªâ‡∫≤‡∫°‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô‡ªÑ‡∫î‡ªâ.
                </p>
             
            </div>

            <!-- RIGHT: SINGLE 3D MOCKUP FOLLOW MOUSE -->
            <div class="hero-right" ref="wrapperRef" @mousemove="onMouseMove" @mouseleave="onMouseLeave">
                <!-- soft glowing shapes behind -->
                <div class="bg-orb bg-orb-1"></div>
                <div class="bg-orb bg-orb-2"></div>

                <div class="mockup-shadow"></div>

                <!-- gradient outer frame -->
                <div class="mockup-frame">
                    <div class="mockup-glow-ring"></div>

                    <div class="mockup-card" ref="mockupRef">
                        <div class="mockup-top-bar">
                            <div class="top-dots">
                                <span></span><span></span><span></span>
                            </div>
                            <div class="top-status">
                                <span class="status-dot"></span>
                                <span class="status-text" style="display:flex; align-items: center;">
                                    ‡∫ú‡∫∞‡∫•‡∫¥‡∫î‡∫ï‡∫∞‡∫û‡∫±‡∫ô‡∫Ç‡∫≠‡∫á ‚Ä¢ LAPNet
                                    <img style="width: 20px; height:20px ; margin-left: 5px;"
                                        src="/logolapnet/fullcircle.png" alt="" />
                                </span>
                            </div>
                        </div>

                        <div class="mockup-inner">
                            <img class="mockup-image" :src="imageSrc" alt="3D product mockup" />

                            <!-- ‚ú® strong light sweep over image -->
                            <div class="image-sweep"></div>

                            <!-- top reflection -->
                            <div class="mockup-reflection"></div>

                            <!-- subtle diagonal shine -->
                            <div class="mockup-overlay"></div>

                            <div class="mockup-chip mockup-chip-bottom">
                                <span class="chip-pill"></span>
                                ‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ç‡ªâ‡∫≤‡∫°‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô‡∫ú‡ªà‡∫≤‡∫ô‡∫ï‡∫π‡ªâ ATM
                            </div>
                        </div>
                    </div>
                </div>

                <!-- extra floating accents -->
                <div class="accent-pill accent-pill-1"></div>
                <div class="accent-pill accent-pill-2"></div>
            </div>
        </div>
    </section>
</template>

<script setup>
import { ref, onMounted, onBeforeUnmount } from "vue";
import { gsap } from "gsap";
import tagproduct from "../../../components/tagproduct/tagproduct.vue";

const props = defineProps({
    // üîÅ put your own image URL here
    imageSrc: {
        type: String,
        default:
            "/product/allatm/product4.jpg",
    },
});

const heroRef = ref(null);
const wrapperRef = ref(null);
const mockupRef = ref(null);

let rotateXTo, rotateYTo, xTo, yTo;
let ctx;

const onMouseMove = (e) => {
    if (!wrapperRef.value || !mockupRef.value) return;

    const rect = wrapperRef.value.getBoundingClientRect();
    const relX = (e.clientX - rect.left) / rect.width - 0.5; // -0.5 ~ 0.5
    const relY = (e.clientY - rect.top) / rect.height - 0.5;

    const maxRotation = 18;
    const maxTranslate = 18;

    const rotY = relX * maxRotation; // left/right
    const rotX = -relY * maxRotation; // up/down
    const tX = relX * maxTranslate;
    const tY = relY * maxTranslate;

    rotateXTo(rotX);
    rotateYTo(rotY);
    xTo(tX);
    yTo(tY);
};

const onMouseLeave = () => {
    if (!mockupRef.value) return;
    gsap.to(mockupRef.value, {
        rotationX: 0,
        rotationY: 0,
        x: 0,
        y: 0,
        duration: 0.7,
        ease: "power3.out",
    });
};
onMounted(() => {
    ctx = gsap.context(() => {
        // entrance animation
        gsap.from(".hero-left", {
            y: 30,
            opacity: 0,
            duration: 0.8,
            ease: "power3.out",
        });

        gsap.from(".mockup-frame", {
            y: 50,
            opacity: 0,
            duration: 1,
            ease: "power3.out",
            delay: 0.1,
        });

        // quick setters for smooth follow
        rotateXTo = gsap.quickTo(mockupRef.value, "rotationX", {
            duration: 0.6,
            ease: "power3.out",
        });
        rotateYTo = gsap.quickTo(mockupRef.value, "rotationY", {
            duration: 0.6,
            ease: "power3.out",
        });
        xTo = gsap.quickTo(mockupRef.value, "x", {
            duration: 0.6,
            ease: "power3.out",
        });
        yTo = gsap.quickTo(mockupRef.value, "y", {
            duration: 0.6,
            ease: "power3.out",
        });

        // ‚ú® small idle floating animation on mockup frame
        gsap.to(".mockup-frame", {
            y: -10,              // how high it floats
            duration: 3,         // speed of one up/down cycle
            ease: "sine.inOut",  // smooth easing
            repeat: -1,          // infinite
            yoyo: true,          // go up then back down
            delay: 1.1,          // start after entrance animation
        });

        // ‚ú® GSAP light sweep on image (very visible)
        gsap.fromTo(
            ".image-sweep",
            { x: "-140%", opacity: 0 },
            {
                x: "140%",
                opacity: 1,
                duration: 1.8,
                ease: "power2.inOut",
                repeat: -1,
                repeatDelay: 1.2,
            }
        );
    }, heroRef);
});


onBeforeUnmount(() => {
    ctx && ctx.revert();
});
</script>

<style scoped>
.hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding: 4rem 6vw;
    background: linear-gradient(135deg, #ffffff 0%, #ffffff 45%, #ffffff 100%);
    color: #0b1020;
    position: relative;
    overflow: hidden;
}

.hero::before {
    content: "";
    position: absolute;
    inset: -40%;
    background:
        radial-gradient(circle at 10% 0%, rgba(0, 51, 171, 0.1), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(0, 3, 41, 0.12), transparent 55%);
    opacity: 0.9;
    pointer-events: none;
}

.hero-inner {
    position: relative;
    z-index: 1;
    display: flex;
    gap: 4rem;
    align-items: center;
    justify-content: space-between;
    max-width: 1100px;
    margin: 0 auto;
}

/* LEFT */
.hero-left {
    flex: 1;
    max-width: 520px;
}

.hero-title {
    margin-top: 1.4rem;
    font-size: clamp(2.5rem, 3.8vw, 5.3rem);
    line-height: 1.1;
    font-weight: 700;
    color: #0b1020;
}

.hero-title span {
    background: linear-gradient(120deg, #0033ab 0%, #0078ff 40%, #00c6ff 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.hero-subtitle {
    margin-top: 1rem;
    font-size: 0.98rem;
    line-height: 1.7;
    margin-bottom: 40px;
    color: #566280;
}

/* RIGHT */
.hero-right {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    perspective: 1100px;
}

/* soft glowing background orbs */
.bg-orb {
    position: absolute;
    border-radius: 999px;
    filter: blur(28px);
    opacity: 0.7;
    pointer-events: none;
}

.bg-orb-1 {
    width: 220px;
    height: 220px;
    background: linear-gradient(95deg,
            rgba(0, 3, 41, 0.2) 0%,
            rgba(0, 51, 171, 0.35) 46%);
    top: -10%;
    left: 10%;
}

.bg-orb-2 {
    width: 260px;
    height: 260px;
    background: radial-gradient(circle at 30% 30%,
            rgba(0, 51, 171, 0.25),
            rgba(0, 3, 41, 0.15));
    bottom: -12%;
    right: 0;
}

.mockup-shadow {
    position: absolute;
    width: 280px;
    height: 70px;
    border-radius: 999px;
    background: rgba(8, 16, 40, 0.2);
    filter: blur(24px);
    bottom: -8px;
    z-index: 0;
}

/* outer gradient frame using your gradient */
.mockup-frame {
    position: relative;
    z-index: 1;
    padding: 1px;
    border-radius: 28px;
    background: linear-gradient(95deg,
            rgba(0, 3, 41, 1) 0%,
            rgba(0, 51, 171, 1) 46%);
    box-shadow:
        0 24px 70px rgba(0, 15, 45, 0.18),
        0 0 0 1px rgba(10, 20, 60, 0.08);
    overflow: hidden;
}

/* soft glow ring around frame */
.mockup-glow-ring {
    position: absolute;
    inset: -16px;
    border-radius: 36px;
    background: radial-gradient(circle at 50% -10%,
            rgba(255, 255, 255, 0.3),
            transparent 65%);
    opacity: 0.9;
    pointer-events: none;
}

/* 3D card */
.mockup-card {
    position: relative;
    width: 430px;
    height: 620px;
    border-radius: 26px;
    background: linear-gradient(145deg, #ffffff 0%, #f1f4ff 100%);
    box-shadow:
        0 26px 60px rgba(9, 22, 70, 0.15),
        inset 0 0 0 1px rgba(210, 220, 255, 0.9);
    transform-style: preserve-3d;
    transform-origin: center;
    transform: rotateX(0deg) rotateY(0deg) translate3d(0, 0, 0);
    overflow: hidden;
}

/* top bar */
.mockup-top-bar {
    position: absolute;
    top: 8px;
    left: 10px;
    right: 10px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 0.6rem;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(14px);
    border: 1px solid rgba(180, 195, 245, 0.9);
    transform: translateZ(40px);
}

.top-dots {
    display: flex;
    gap: 0.25rem;
}

.top-dots span {
    width: 7px;
    height: 7px;
    border-radius: 999px;
    background: #ff5f57;
}

.top-dots span:nth-child(2) {
    background: #febc2e;
}

.top-dots span:nth-child(3) {
    background: #28c840;
}

.top-status {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.68rem;
    color: #3f4c7a;
}

.status-dot {
    width: 7px;
    height: 7px;
    border-radius: 999px;
    background: #00c6ff;
    box-shadow: 0 0 10px rgba(0, 198, 255, 0.8);
}

/* inner content */
.mockup-inner {
    position: absolute;
    inset: 38px 16px 16px 16px;
    border-radius: 18px;
    overflow: hidden;
    transform: translateZ(30px);
    box-shadow: 0 16px 45px rgba(9, 22, 70, 0.22);
    background: #000;
    /* in case image has transparency */
}

.mockup-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* ‚ú® light sweep over image (TOP layer) */
.image-sweep {
    position: absolute;
    top: -20%;
    left: -40%;
    width: 60%;
    height: 140%;
    background: linear-gradient(120deg,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 255, 255, 0.9) 45%,
            rgba(255, 255, 255, 0) 100%);
    transform: skewX(-20deg);
    mix-blend-mode: screen;
    pointer-events: none;
    opacity: 0;
    z-index: 3;
}

/* top reflection band (under sweep) */
.mockup-reflection {
    position: absolute;
    top: -18%;
    left: -10%;
    width: 130%;
    height: 40%;
    background: linear-gradient(180deg,
            rgba(255, 255, 255, 0.3),
            transparent 80%);
    transform: skewY(-10deg);
    pointer-events: none;
    z-index: 1;
}

/* diagonal shine (under sweep) */
.mockup-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
            rgba(0, 51, 171, 0.12),
            transparent 45%,
            rgba(0, 3, 41, 0.32) 100%);
    mix-blend-mode: screen;
    pointer-events: none;
    z-index: 2;
}

/* floating glass chips */
.mockup-chip {
    position: absolute;
    padding: 0.4rem 0.8rem;
    border-radius: 999px;
    font-size: 0.7rem;
    background: rgba(255, 255, 255, 0.94);
    color: #2c3555;
    border: 1px solid rgba(0, 51, 171, 0.25);
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    backdrop-filter: blur(12px);
    transform: translateZ(55px);
    box-shadow: 0 8px 25px rgba(9, 22, 70, 0.15);
    z-index: 4;
}

.mockup-chip-bottom {
    bottom: 12px;
    left: 16px;
}

.chip-pill {
    width: 16px;
    height: 8px;
    border-radius: 999px;
    background: linear-gradient(95deg,
            rgba(0, 3, 41, 1) 0%,
            rgba(0, 51, 171, 1) 46%);
}

/* extra floating accents around mockup */
.accent-pill {
    position: absolute;
    border-radius: 999px;
    backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 51, 171, 0.25);
    background: rgba(255, 255, 255, 0.8);
    box-shadow: 0 12px 30px rgba(9, 22, 70, 0.12);
}

.accent-pill-1 {
    width: 80px;
    height: 22px;
    top: 14%;
    right: -8px;
}

.accent-pill-2 {
    width: 60px;
    height: 20px;
    bottom: 8%;
    left: -8px;
}

@media (max-width: 960px) {
    .hero {
        padding: 3.4rem 7vw 4.2rem;
    }

    .hero-inner {
        flex-direction: column;
        text-align: left;
        gap: 3rem;
    }

    .hero-left {
        max-width: 100%;
    }

    .hero-right {
        width: 100%;
    }

    .mockup-card {
        width: 300px;
        height: 420px;
    }

    .mockup-frame {
        transform: scale(0.96);
    }
}

@media (max-width: 640px) {
    .hero {
        padding: 2.7rem 6vw 3.4rem;
    }

    .mockup-frame {
        transform: scale(0.9);
    }
}
</style>
